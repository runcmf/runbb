{{ fireHook('view.header.start') }}
<!DOCTYPE html>
<html lang="{{ trans('lang_identifier') }}">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
{% if is_indexed %}
    <meta name="robots" content="noindex, follow">
{% endif %}
    <title>{{ pageTitle }}</title>
    <link rel="shortcut icon" href="{{ baseStatic() }}/style/img/favicon.png" />
    <!-- Theme -->
    <link rel="stylesheet" type="text/css" href="{{ baseStatic() }}/style/themes/{{ style }}/style.css">

{% for type, items in assets if type != 'js' %}
<!-- {{ type|capitalize }} -->
    {% for item in items %}
        {% if item.params.type == 'text/javascript' %}
            <script {% for key, value in item.params %}{{ key }}={{ value }} {% endfor %}src="{{ baseStatic() }}/{{ item.file }}" /></script>
        {% else %}
<link {% for key, value in item.params %}{{ key }}={{ value }} {% endfor %} href="{{ baseStatic() }}/{{ item.file }}">
        {% endif %}
    {% endfor %}
{% endfor %}


{%  if admin_console %}
    {{ admStyle }}
{% endif %}


{% if required_fields is not empty %}
    <!-- Output JavaScript to validate form (make sure required fields are filled out) -->
    <script type="text/javascript">
        /* <![CDATA[ */
        function process_form(the_form)
        {
            var required_fields = {
            {{ required_fields|join(', ') }}
            };

                {# Output a JavaScript object with localised field names #}
//                    $tpl_temp = count($required_fields);
//                foreach ($required_fields as $elem_orig => $elem_trans) {
//                    echo "\"".$elem_orig.'": "'.addslashes(str_replace('&#160;', ' ', $elem_trans));
//                    if (--$tpl_temp) {
//                        echo "\", ";
//                    } else {
//                        echo "\"\n\t\t\t\t};\n";
//                    }
//                }

            if (document.all || document.getElementById)
            {
                for (var i = 0; i < the_form.length; ++i)
                {
                    var elem = the_form.elements[i];
                    if (elem.name && required_fields[elem.name] && !elem.value && elem.type && (/^(?:text(?:area)?|password|file)$/i.test(elem.type)))
                    {
                        alert('"' + required_fields[elem.name] + '" {{ trans('required field') }}');
                        elem.focus();
                        return false;
                    }
                }
            }
            return true;
        }
        /* ]]> */
    </script>

{% endif %}

{% if page_head is not empty %}
    {{ page_head|join("\n") }}
{% endif %}

{{ fireHook('view.header.before.head.tag') }}

</head>

<body id="pun{{ active_page }}"{% if focus_element %} onload="document.getElementById('{{ focus_element.0 }}').elements['{{ focus_element.1 }}'].focus();"{% endif %}>
    <header>
        <nav>
            <div class="container">
                <div class="phone-menu" id="phone-button">
                    <a class="button-phone"></a>
                </div>
                <div id="phone">
                    <div id="brdmenu" class="inbox">
                        <ul>
                            <!-- navlinks -->
                            {% for row in navlinks %}
                                {% if row is iterable %}

                                <li id="{{ row.id }}"{{ row.active|raw }}><a href="{{ row.href }}">{{ row.text }}</a></li>
                                {% else %}
                                {{ row|raw }}
                                {% endif %}
                            {% endfor %}
                            <!-- /navlinks -->
                        </ul>
                    </div>
                    <div class="navbar-right">
                        <form method="get" action="{{ pathFor('search') }}" class="nav-search">
                            <input type="hidden" name="action" value="search">
                            <input type="text" name="keywords" size="20" maxlength="100" placeholder="{{ trans('Search') }}">
                        </form>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container">
            <div class="container-title-status">
                <h1 class="title-site">
                    <a href="{{ urlBase() }}/forum" title="" class="site-name">
                        <p>{{ settings('o_board_title') }}</p>
                    </a>
                    <div id="brddesc">{{ settings('o_board_desc') }}</div>
                </h1>
                <div class="status-avatar">
                    <div id="brdwelcome" class="inbox">


        {% if userGet('is_guest') %}
                        <p class="conl">{{ trans('Not logged in') }}</p>
        {% else %}
            <ul class="conl">
                <li><span>{{ trans('Logged in as') }} <strong>{{ userGet('username') }}</strong></span></li>
                <li><span>{{ trans('Last visit') }} {{ formatTime( userGet('last_visit') ) }}</span></li>


            {% if userGet('is_admmod') %}
                {% if settings('o_report_method')  == '0' or settings('o_report_method') == '2' %}
                    {% if has_reports %}
                        <li class="reportlink"><span><strong><a href="{{ pathFor('adminReports') }}">{{ trans('New reports') }}</a></strong></span></li>
                    {% endif %}
                {% endif %}
                {% if settings('o_maintenance') == '1' %}
                    <li class="maintenancelink"><span><strong><a href="{{ pathFor('adminMaintenance') }}">{{ trans('Maintenance mode enabled') }}</a></strong></span></li>
                {% endif %}
            {% endif %}

            {% set headerToplist = fireHook(['header.toplist', []]) %}
            {{ headerToplist|join("\n") }}

            </ul>
        {% endif %}

{% if userGet('g_read_board') == '1' and userGet('g_search') == '1' %}
            <ul class="conr">
                <li>{{ trans('Topic searches') }}
            {% if userGet('is_guest') %}
                <a href="{{ pathFor('quickSearch', {'show': 'replies'}) }}" title="{{ trans('Show posted topics') }}">{{ trans('Posted topics') }}</a> |
                <a href="{{ pathFor('quickSearch', {'show': 'new'}) }}" title="{{ trans('Show new posts') }}">{{ trans('New posts header') }}</a> |
            {% endif %}
                <a href="{{ pathFor('quickSearch', {'show': 'recent'}) }}" title="{{ trans('Show active topics') }}">{{ trans('Active topics') }}</a> |
                <a href="{{ pathFor('quickSearch', {'show': 'unanswered'}) }}" title="{{ trans('Show unanswered topics') }}">{{ trans('Unanswered topics') }}</a>
                </li>
            </ul>
{% endif %}

{{ fireHook('view.header.brdwelcome') }}
                    <div class="clearer"></div>
                    </div>
                </div>
                <div class="clear"></div>
            </div>

{% if userGet('g_read_board') == '1' and settings('o_announcement') == '1' %}
            <div id="announce" class="block">
                <div class="hd"><h2><span>{{ trans('Announcement') }}</span></h2></div>
                <div class="box">
                    <div id="announce-block" class="inbox">
                        <div class="usercontent">{{ settings('o_announcement_message') }}</div>
                    </div>
                </div>
            </div>
{% endif %}


{% if flashMessages is not empty %}
            <script type="text/javascript">
                window.onload = function() {
                    var flashMessage = document.getElementById('flashmsg');
                    flashMessage.className = 'flashmsg '+flashMessage.getAttribute('data-type')+' show';
                    setTimeout(function () {
                        flashMessage.className = 'flashmsg '+flashMessage.getAttribute('data-type');
                    }, 10000);
                    return false;
                }
            </script>
    {% for type, message in flashMessages %}
{{ dump(message) }}
            <div class="flashmsg info" data-type="{{ type }}" id="flashmsg">
                <h2>{{ trans('Info') }}
                    <span style="float:right;cursor:pointer"
                            onclick="document.getElementById('flashmsg').className = 'flashmsg';">&times;
                            </span>
                </h2>
                <p>{{ message.0 }}</p>
            </div>
    {% endfor %}
{% endif %}

        </div>
    </header>

    <section class="container">
        <div id="brdmain">

{{ fireHook('view.header.end') }}
